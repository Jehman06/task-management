"use strict";(self.webpackChunktask_management=self.webpackChunktask_management||[]).push([[292],{8292:(e,a,r)=>{r.r(a),r.d(a,{default:()=>M});var o=r(5043),s=r(3003),t=r(9903),n=r(5635),l=(r(4448),r(2055)),d=r(2462),c=r(4282),i=r(5173),m=r.n(i),g=r(4120),u=r(723),p=r(8310);const h=m().oneOf(["start","end"]),b=m().oneOfType([h,m().shape({sm:h}),m().shape({md:h}),m().shape({lg:h}),m().shape({xl:h}),m().shape({xxl:h}),m().object]);var x=r(579);const j={id:m().string,href:m().string,onClick:m().func,title:m().node.isRequired,disabled:m().bool,align:b,menuRole:m().string,renderMenuOnMount:m().bool,rootCloseEvent:m().string,menuVariant:m().oneOf(["dark"]),flip:m().bool,bsPrefix:m().string,variant:m().string,size:m().string},k=o.forwardRef(((e,a)=>{let{title:r,children:o,bsPrefix:s,rootCloseEvent:t,variant:n,size:l,menuRole:d,renderMenuOnMount:c,disabled:i,href:m,id:h,menuVariant:b,flip:j,...k}=e;return(0,x.jsxs)(g.A,{ref:a,...k,children:[(0,x.jsx)(u.A,{id:h,href:m,size:l,variant:n,disabled:i,childBsPrefix:s,children:r}),(0,x.jsx)(p.A,{role:d,renderOnMount:c,rootCloseEvent:t,variant:b,flip:j,children:o})]})}));k.displayName="DropdownButton",k.propTypes=j;const f=k;var v=r(8139),A=r.n(v),w=r(7852);const C=o.forwardRef(((e,a)=>{let{bsPrefix:r,size:o,vertical:s=!1,className:t,role:n="group",as:l="div",...d}=e;const c=(0,w.oU)(r,"btn-group");let i=c;return s&&(i="".concat(c,"-vertical")),(0,x.jsx)(l,{...d,ref:a,role:n,className:A()(t,i,o&&"".concat(c,"-").concat(o))})}));C.displayName="ButtonGroup";const y=C;var N=r(7154),B=r(1880),I=r(2371),E=r(184);const M=()=>{const[e,a]=(0,o.useState)(!1),r=(0,s.d4)((e=>e.modal.createBoardModal)),i=(0,s.d4)((e=>e.board.boardFormData)),m=(0,s.d4)((e=>e.workspace.workspaces)),u=(0,s.d4)((e=>e.modal.selectedWorkspace)),p=(0,s.d4)((e=>e.modal.selectedDefaultImage)),h=(0,s.d4)((e=>e.modal.errorTitleMessage)),b=(0,s.d4)((e=>e.modal.errorImageMessage)),j=(0,s.d4)((e=>e.modal.errorWorkspaceMessage)),k=(0,s.d4)((e=>e.modal.sampleImages)),v=(0,s.d4)((e=>e.modal.images)),A=(0,s.d4)((e=>e.modal.showImageModal)),w=(0,s.wA)();(0,o.useEffect)((()=>{M()}),[]),(0,o.useEffect)((()=>{A&&F()}),[A]),(0,o.useEffect)((()=>{p&&i.title&&i.workspace.name?a(!0):a(!1)}),[p,i.title,i.workspace.name]);const C=e=>{w((0,t.AZ)(e)),w((0,n.X4)({...i,default_image:e.id}))},M=async()=>{try{const e=B.A.get("access_token"),a=await N.A.get("http://127.0.0.1:8000/api/images/sample",{headers:{Authorization:"Bearer ".concat(e)}});w((0,t.f)(a.data.images))}catch(e){console.error("Error fetching images:",e)}},F=async()=>{try{await(0,I.$)();const e=B.A.get("access_token"),a=await N.A.get("http://127.0.0.1:8000/api/images/all",{headers:{Authorization:"Bearer ".concat(e)}});w((0,t.Bu)(a.data.images))}catch(e){console.error("Error fetching images:",e)}};(0,o.useEffect)((()=>{m.length>0&&(w((0,t.vg)(m[0])),w((0,n.X4)({...i,workspace:m[0]})))}),[m,w]);const z=a=>{a.preventDefault(),e&&(w((0,t.BW)()),w((0,t.l5)()),(async e=>{const a=B.A.get("access_token");try{await(0,I.$)(),await N.A.post("http://127.0.0.1:8000/api/boards/create",e,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}}),w((0,t.l5)()),window.location.reload(),console.log("boardFormData:",e)}catch(r){console.log("boardFormData:",e),console.error("Error creating board:",r)}})(i))};return(0,x.jsxs)(l.A,{show:r,onHide:()=>w((0,t.BW)()),centered:!0,children:[(0,x.jsx)(l.A.Header,{closeButton:!0,style:{backgroundColor:"#33373a",color:"#9fadbc"},children:(0,x.jsx)(l.A.Title,{children:"Create a new Board"})}),(0,x.jsx)(l.A.Body,{style:{backgroundColor:"#33373a",color:"#9fadbc"},className:"modal-body",children:(0,x.jsxs)(d.A,{onSubmit:z,children:[(0,x.jsxs)(d.A.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[(0,x.jsx)(d.A.Label,{children:"Background image"}),(0,x.jsxs)("div",{className:"modal-background-images",children:[(k||[]).map((e=>(0,x.jsx)("img",{src:e.url,alt:e.alt,className:(null===p||void 0===p?void 0:p.id)===e.id?"modal-background selected":"modal-background",onClick:()=>C(e)},e.id))),(0,x.jsxs)("div",{className:"browse-and-selected",children:[(0,x.jsxs)("button",{className:"browse-images",onClick:()=>w((0,t.g9)(!0)),children:[(0,x.jsx)(E.Z0P,{})," Browse more images..."]}),p&&(0,x.jsxs)("div",{className:"selected-image",style:{marginTop:"0.5rem",marginBottom:0},children:[(0,x.jsx)("img",{src:p.url,alt:p.alt,className:"modal-background selected"}),(0,x.jsx)("p",{children:"Nice choice!"})]})]}),b&&(0,x.jsx)("div",{className:"p-1 text-danger bg-danger-subtle border border-danger rounded-3 w-100 mb-2",children:b}),(0,x.jsxs)(l.A,{show:A,onHide:()=>w((0,t.g9)(!1)),size:"xl",centered:!0,children:[(0,x.jsx)(l.A.Header,{closeButton:!0,style:{backgroundColor:"#33373a"},children:(0,x.jsx)(l.A.Title,{style:{color:"#9fadbc"},children:"Choose an image"})}),(0,x.jsxs)(l.A.Body,{style:{backgroundColor:"#33373a"},children:[(0,x.jsx)("div",{className:"modal-background-images",children:(A?v:k).map((e=>(0,x.jsx)("img",{src:e.url,alt:e.alt,className:(null===p||void 0===p?void 0:p.id)===e.id?"modal-background selected":"modal-background",onClick:()=>C(e)},e.id)))}),(0,x.jsx)("div",{style:{textAlign:"right"},children:(0,x.jsx)(c.A,{variant:"secondary",onClick:()=>w((0,t.g9)(!1)),children:"Ok"})})]})]})]})]}),(0,x.jsxs)(d.A.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[(0,x.jsx)(d.A.Label,{children:"Board title"}),(0,x.jsx)(d.A.Control,{type:"text",className:"modal-input",autoFocus:!0,value:i.title,onChange:e=>w((0,n.X4)({...i,title:e.target.value}))}),h&&(0,x.jsx)("div",{className:"p-1 text-danger bg-danger-subtle border border-danger rounded-3 w-100 mb-2",children:h})]}),(0,x.jsxs)(d.A.Group,{className:"mb-3",controlId:"exampleForm.ControlDropdown1",children:[(0,x.jsx)(d.A.Label,{children:"Workspace"}),0===m.length?(0,x.jsx)(d.A.Control,{type:"text",className:"modal-input",required:!0,value:i.workspace&&i.workspace.name||"",onChange:e=>w((0,n.X4)({...i,workspace:{name:e.target.value}}))}):(0,x.jsx)(f,{as:y,title:u?u.name:"Workspace",className:"modal-dropdown-button custom-dropdown-button",variant:"secondary",children:m.map((e=>(0,x.jsx)(g.A.Item,{eventKey:e.id,className:"modal-dropdown-item",onClick:()=>(e=>{w((0,t.vg)(e)),w((0,n.X4)({...i,workspace:e.id}))})(e),children:e.name},e.id)))}),j&&(0,x.jsx)("div",{className:"p-1 text-danger bg-danger-subtle border border-danger rounded-3 w-100 mb-2",children:j})]}),(0,x.jsxs)(d.A.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[(0,x.jsx)(d.A.Label,{children:"Description"}),(0,x.jsx)(d.A.Control,{as:"textarea",rows:3,className:"modal-input",value:i.description,onChange:e=>w((0,n.X4)({...i,description:e.target.value}))})]})]})}),(0,x.jsxs)(l.A.Footer,{style:{backgroundColor:"#33373a",color:"#9fadbc"},children:[(0,x.jsx)(c.A,{variant:"secondary",onClick:()=>w((0,t.BW)()),className:"modal-create-button",children:"Close"}),(0,x.jsx)(c.A,{variant:"primary",onClick:z,disabled:!e,className:"create-button",children:"Create board"})]})]})}}}]);
//# sourceMappingURL=292.703bf4ca.chunk.js.map